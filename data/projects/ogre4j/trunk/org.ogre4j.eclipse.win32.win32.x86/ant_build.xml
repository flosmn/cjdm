<?xml version="1.0" encoding="UTF-8"?>
<project basedir="." default="build.proj.files" name="org.ogre4j.eclipse.win32.win32.x86">
    <description>ANT build script to generate the eclipse project 
    files based on the org.ogre4j project. This makes it easier to
    manage versioning of this plugin. Just run the default target to
    generate project files that are in sync with the org.ogre4j project.
    </description>
    <property name="org.ogre4j.dir"
              description="The org.ogre4j project folder."
              value="../org.ogre4j" />

    <!-- ********************************************************** -->
    <target name="build.proj.files"
            depends="copy.ogre4j, build.osgi.manifest">
        <description>Builds all project files for the Eclipse IDE.</description>
    </target>

    <!-- ********************************************************** -->
    <import file="${org.ogre4j.dir}/build.xml" />
    <target name="copy.ogre4j"> 
        <description>Runs the build script of org.ogre4j and copies the
            ogre4j.dll into the root folder of this plugin.</description>
        <!--
    	<copy file="${org.ogre4j.dir}/${ogre4j.bin.c.release.lib}.dll" todir="." />
    	<copy todir=".">
    		 <fileset dir="${env.OGRE_HOME}/bin/release" includes="*.dll" excludes="CEGUI*,OgreGUI*"/>
    	</copy>
    	-->
    </target>
	
    <!-- ********************************************************** -->
    <property file="plugin.properties" />

    <target name="build.osgi.manifest">
        <description>Builds the OSGi bundle manifest.</description>
        <manifest file="META-INF/MANIFEST.MF">
            <attribute name="Bundle-ManifestVersion" value="2" />
            <attribute name="Bundle-Name" value="%fragmentName" />
            <attribute name="Bundle-SymbolicName" value="org.ogre4j.eclipse.win32.win32.x86;singleton:=true" />         
            <attribute name="Bundle-Version" value="${ogre4j.version}" />
            <attribute name="Bundle-Vendor" value="ogre4j.org" />
            <attribute name="Bundle-Localization" value="fragment" />
        	<attribute name="Fragment-Host" value="org.ogre4j.eclipse;bundle-version=${ogre4j.version}"/>
            <attribute name="Eclipse-PlatformFilter" value="(&amp; (osgi.ws=win32) (osgi.os=win32) (osgi.arch=x86))"/>
        </manifest>
    </target>

    <!-- ********************************************************** -->
    <target name="clean">
        <delete dir="." includes="*.jar,*.zip,*.dll" failonerror="false"/>
        <delete file="META-INF/MANIFEST.MF" failonerror="false"/>
    </target>
</project>
